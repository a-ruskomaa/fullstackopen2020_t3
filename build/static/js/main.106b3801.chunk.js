(this.webpackJsonppuhelinluettelo=this.webpackJsonppuhelinluettelo||[]).push([[0],{14:function(e,t,n){e.exports=n(36)},36:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),o=n(13),u=n.n(o),c=n(2),l=n(3),i=n.n(l),m="/api/persons",s=function(){return i.a.get(m).then((function(e){return e.data}))},d=function(e){return i.a.post(m,e).then((function(e){return e.data}))},f=function(e,t){return i.a.put("".concat(m,"/").concat(e),t).then((function(e){return e.data}))},b=function(e){return i.a.delete("".concat(m,"/").concat(e)).then((function(e){return e.data}))},p=function(e){var t=e.persons,n=e.filter,a=e.deletePerson,o=function(e){var t=e.person,n=e.deleteHandler;return r.a.createElement("li",null,t.name," ",t.number," ",r.a.createElement("button",{onClick:n},"delete"))};return r.a.createElement("div",null,r.a.createElement("ul",null,t.filter((function(e){return e.name.toLowerCase().includes(n.toLowerCase())})).map((function(e){return r.a.createElement(o,{key:e.id,person:e,deleteHandler:function(){return a(e.id,e.name)}})}))))},h=function(e){var t=e.addPerson,n=e.formData;return r.a.createElement("form",{onSubmit:t},r.a.createElement("div",null,"name: ",r.a.createElement("input",{value:n.newName,onChange:function(e){return n.setNewName(e.target.value)}})),r.a.createElement("div",null,"number: ",r.a.createElement("input",{value:n.newNumber,onChange:function(e){return n.setNewNumber(e.target.value)}})),r.a.createElement("div",null,r.a.createElement("button",{type:"submit"},"add")))},v=function(e){var t=e.filter,n=e.setFilter;return r.a.createElement("div",null,"filter shown persons by: ",r.a.createElement("input",{value:t,onChange:function(e){return n(e.target.value)}}))},E=function(e){var t=e.notification,n={background:"lightgrey",fontSize:20,borderStyle:"solid",borderRadius:5,padding:10,marginBottom:10};return null===t?null:"error"===t.type?r.a.createElement("div",{style:n},r.a.createElement((function(e){var t=e.notification;return r.a.createElement("div",{style:{color:"red"}},t.message)}),{notification:t})):"info"===t.type?r.a.createElement("div",{style:n},r.a.createElement((function(e){var t=e.notification;return r.a.createElement("div",{style:{color:"green"}},t.message)}),{notification:t})):r.a.createElement("div",{style:n},t.message)},g=function(){var e=Object(a.useState)([]),t=Object(c.a)(e,2),n=t[0],o=t[1],u=Object(a.useState)(""),l=Object(c.a)(u,2),i=l[0],m=l[1],g=Object(a.useState)(""),w=Object(c.a)(g,2),y=w[0],N=w[1],j=Object(a.useState)(""),O=Object(c.a)(j,2),k=O[0],S=O[1],P=Object(a.useState)(null),C=Object(c.a)(P,2),D=C[0],F=C[1],B={newName:y,setNewName:N,newNumber:k,setNewNumber:S};Object(a.useEffect)((function(){s().then((function(e){o(e)}))}),[]);var H=function(e){F({message:e,type:"error"}),setTimeout((function(){F(null)}),5e3)},J=function(e){F({message:e,type:"info"}),setTimeout((function(){F(null)}),5e3)};return r.a.createElement("div",null,r.a.createElement("h2",null,"Phonebook"),r.a.createElement(E,{notification:D}),r.a.createElement("h3",null,"PersonFilter"),r.a.createElement(v,{value:i,setFilter:m}),r.a.createElement("h3",null,"Add new"),r.a.createElement(h,{addPerson:function(e){if(e.preventDefault(),n.map((function(e){return e.name})).includes(y)){if(window.confirm("".concat(y," is already added to the phonebook, do you want to update ").concat(y,"'s phone number?"))){var t=n.find((function(e){return e.name===y})).id,a={name:y,number:k,id:t};f(t,a).then((function(e){var r=n.map((function(e){return e.id!==t?e:a}));o(r),N(""),S(""),J("".concat(a.name,"'s number has been updated"))})).catch((function(e){H("".concat(a.name," can't be updated!"))}))}}else{var r={name:y,number:k};console.log(r),d(r).then((function(e){o(n.concat(e)),N(""),S(""),J("".concat(e.name," has been added to the Phonebook"))}))}},formData:B}),r.a.createElement("h3",null,"Numbers"),r.a.createElement(p,{persons:n,filter:i,deletePerson:function(e,t){window.confirm("Delete ".concat(t,"?"))&&b(e).then(o(n.filter((function(t){return t.id!==e})))).catch((function(e){H("".concat(t," has already been removed from the server"))}))}}))};u.a.render(r.a.createElement(g,null),document.getElementById("root"))}},[[14,1,2]]]);
//# sourceMappingURL=main.106b3801.chunk.js.map