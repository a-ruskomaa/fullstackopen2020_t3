(this.webpackJsonppuhelinluettelo=this.webpackJsonppuhelinluettelo||[]).push([[0],{14:function(e,t,n){e.exports=n(36)},36:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),o=n(13),u=n.n(o),c=n(2),l=n(3),i=n.n(l),s="/api/persons",m=function(){return i.a.get(s).then((function(e){return e.data}))},f=function(e){return i.a.post(s,e).then((function(e){return e.data}))},d=function(e,t){return i.a.put("".concat(s,"/").concat(e),t).then((function(e){return e.data}))},b=function(e){return i.a.delete("".concat(s,"/").concat(e)).then((function(e){return e.data}))},h=function(e){var t=e.persons,n=e.filter,a=e.deletePerson,o=function(e){var t=e.person,n=e.deleteHandler;return r.a.createElement("li",null,t.name," ",t.number," ",r.a.createElement("button",{onClick:n},"delete"))};return r.a.createElement("div",null,r.a.createElement("ul",null,t.filter((function(e){return e.name.toLowerCase().includes(n.toLowerCase())})).map((function(e){return r.a.createElement(o,{key:e.id,person:e,deleteHandler:function(){return a(e.id,e.name)}})}))))},p=function(e){var t=e.addPerson,n=e.formData;return r.a.createElement("form",{onSubmit:t},r.a.createElement("div",null,"name: ",r.a.createElement("input",{value:n.newName,onChange:function(e){return n.setNewName(e.target.value)}})),r.a.createElement("div",null,"number: ",r.a.createElement("input",{value:n.newNumber,onChange:function(e){return n.setNewNumber(e.target.value)}})),r.a.createElement("div",null,r.a.createElement("button",{type:"submit"},"add")))},v=function(e){var t=e.filter,n=e.setFilter;return r.a.createElement("div",null,"filter shown persons by: ",r.a.createElement("input",{value:t,onChange:function(e){return n(e.target.value)}}))},E=function(e){var t=e.notification,n={background:"lightgrey",fontSize:20,borderStyle:"solid",borderRadius:5,padding:10,marginBottom:10};return null===t?null:"error"===t.type?r.a.createElement("div",{style:n},r.a.createElement((function(e){var t=e.notification;return r.a.createElement("div",{style:{color:"red"}},t.message)}),{notification:t})):"info"===t.type?r.a.createElement("div",{style:n},r.a.createElement((function(e){var t=e.notification;return r.a.createElement("div",{style:{color:"green"}},t.message)}),{notification:t})):r.a.createElement("div",{style:n},t.message)},g=function(){var e=Object(a.useState)([]),t=Object(c.a)(e,2),n=t[0],o=t[1],u=Object(a.useState)(""),l=Object(c.a)(u,2),i=l[0],s=l[1],g=Object(a.useState)(""),w=Object(c.a)(g,2),y=w[0],N=w[1],j=Object(a.useState)(""),O=Object(c.a)(j,2),k=O[0],P=O[1],S=Object(a.useState)(null),C=Object(c.a)(S,2),D=C[0],F=C[1],B={newName:y,setNewName:N,newNumber:k,setNewNumber:P};Object(a.useEffect)((function(){m().then((function(e){o(e)}))}),[]);var H=function(e){F({message:e,type:"error"}),setTimeout((function(){F(null)}),5e3)},J=function(e){F({message:e,type:"info"}),setTimeout((function(){F(null)}),5e3)};return r.a.createElement("div",null,r.a.createElement("h2",null,"Phonebook"),r.a.createElement(E,{notification:D}),r.a.createElement("h3",null,"PersonFilter"),r.a.createElement(v,{value:i,setFilter:s}),r.a.createElement("h3",null,"Add new"),r.a.createElement(p,{addPerson:function(e){e.preventDefault();var t=n.find((function(e){return e.name===y}));if(t&&window.confirm("".concat(y," is already added to the phonebook, do you want to update ").concat(y,"'s phone number?"))){var a=t.id,r={name:y,number:k,id:a};d(a,r).then((function(e){var t=n.map((function(e){return e.id!==a?e:r}));o(t),N(""),P(""),J("".concat(r.name,"'s number has been updated"))})).catch((function(e){console.log(e.response)}))}else{var u={name:y,number:k};console.log(u),f(u).then((function(e){o(n.concat(e)),N(""),P(""),J("".concat(e.name," has been added to the Phonebook"))})).catch((function(e){var t=e.response.data.errors.join("\n");H(t)}))}},formData:B}),r.a.createElement("h3",null,"Numbers"),r.a.createElement(h,{persons:n,filter:i,deletePerson:function(e,t){window.confirm("Delete ".concat(t,"?"))&&b(e).then((function(a){o(n.filter((function(t){return t.id!==e}))),J("".concat(t," has been removed from the Phonebook"))})).catch((function(e){console.log(e.response.data)}))}}))};u.a.render(r.a.createElement(g,null),document.getElementById("root"))}},[[14,1,2]]]);
//# sourceMappingURL=main.342475e0.chunk.js.map